# Домашнее задание к занятию "10.3 Pacemaker - Черепанов Владислав"


### Инструкция по выполнению домашнего задания


### Задание 1.

Опишите основные функции и назначение Pacemaker.

*Приведите ответ в свободной форме.*

Обнаружение и восстановление сбоев на уровне узлов и сервисов;  
Независимость от подсистемы хранения: общий диск не требуется;  
Независимость от типов ресурсов: все, что может быть заскриптовано, может быть кластеризовано;  
Поддержка кластеров любого размера;  
Поддержка и кворумных и ресурсозависимых кластеров;  
Поддержка практически любой избыточной конфигурации;  
Автоматическая репликация конфига на все узлы кластера;  
Возможность задания порядка запуска ресурсов, а также их совместимости на одном узле;  

Иными словами отказоустойчивый кластер.  
---

### Задание 2.

Опишите основные функции и назначение Corosync.

*Приведите ответ в свободной форме.*

Отслеживание состояния приложений.  
Оповещение приложений о смене активной ноды кластера.  
Отправка одинаковых сообщений процессам на всех узлах кластера.  
Предоставление доступа к базе данных с конфигурацией и статистикой, а также отправка уведомлений о ее изменениях.  

---

### Задание 3.

Соберите модель, состоящую из двух виртуальных машин. Установите pacemaker, corosync, pcs.  Настройте HA кластер.

*Пришлите конфигурации сервисов для каждой ноды, конфигурационный файл corosync и бэкап конфигурации pacemaker при помощи команды pcs config backup filename.*

totem {
    version: 2
    cluster_name: newCluster
    transport: knet
    crypto_cipher: aes256
    crypto_hash: sha256
}

nodelist {
    node {
        ring0_addr: node1
        name: node1
        nodeid: 1
    }

    node {
        ring0_addr: node2
        name: node2
        nodeid: 2
    }
}

quorum {
    provider: corosync_votequorum
    two_node: 1
}

logging {
    to_logfile: yes
    logfile: /var/log/corosync/corosync.log
    to_syslog: yes
    timestamp: on
}


https://github.com/plusvaldis/srlb-hw/blob/main/files/pace.tar.bz2 - backup config

---

### Дополнительные задания (со звездочкой*)
Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.
 
---

### Задание 4.

Установите и настройте DRBD сервис для настроенного кластера.

*Пришлите  конфигурацию DRBD сервиса - *.res ресурсов для каждой ноды.**  

https://github.com/plusvaldis/srlb-hw/blob/main/files/mysql.res  
https://github.com/plusvaldis/srlb-hw/blob/main/files/www.res

